# 🚗 교통 관제 시스템 - 파이널 프로젝트

> **프로젝트 시작일**: 2026-01-26  
> **기반 프로젝트**: A_TEST (미니 프로젝트 - Flask + HTML5)

---

## 📋 프로젝트 개요

고속도로/도로 CCTV 영상을 실시간 분석하여 교통 상황을 모니터링하고 이상 상황을 감지하는 **AI 기반 교통 관제 시스템**

---

## 🛠️ 기술 스택

### Backend

| 구분        | 기술               | 선택 이유                                 |
| ----------- | ------------------ | ----------------------------------------- |
| Framework   | **FastAPI**        | 비동기 처리, 자동 API 문서화, 타입 안정성 |
| ORM         | SQLAlchemy         | 기존 경험 활용                            |
| Database    | MySQL / PostgreSQL | 안정적인 RDBMS                            |
| 실시간 통신 | WebSocket          | CCTV 스트리밍에 적합                      |

### Frontend

| 구분      | 기술                | 선택 이유                             |
| --------- | ------------------- | ------------------------------------- |
| Framework | **Next.js**         | React 기반, SSR/CSR 혼합, 라우팅 편리 |
| 스타일링  | CSS / Tailwind      | 현대적 UI                             |
| 지도      | Kakao Map API       | 한국 도로 정보에 최적화               |
| 차트      | Chart.js / Recharts | 교통량 시각화                         |

### AI / ML

| 구분        | 기술                               | 설명                            |
| ----------- | ---------------------------------- | ------------------------------- |
| 객체 탐지   | **YOLO**                           | 차량, 사람, 화재, 연기 등 감지  |
| 추론 엔진   | **OpenVINO** 또는 **ONNX Runtime** | Intel GPU 최적화, 크로스 플랫폼 |
| 교통량 예측 | XGBoost                            | 시계열 예측 (기존 모델 활용)    |

---

## 🖥️ UI 구성 (구상안)

```
┌─────────────────────────────────────────────────────────────┐
│  🔷 네비게이션 바                                              │
│  [로고]  [대시보드]  [CCTV 모니터링]  [교통 현황]  [설정]        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────┐  ┌─────────────────────────┐  │
│  │                         │  │                         │  │
│  │    실시간 CCTV 영상     │  │      교통 상태 지도     │  │
│  │    (WebSocket 스트림)   │  │     (Kakao Map API)     │  │
│  │                         │  │                         │  │
│  └─────────────────────────┘  └─────────────────────────┘  │
│                                                             │
│  ┌─────────────────────────┐  ┌─────────────────────────┐  │
│  │   📊 교통량 그래프      │  │   🚨 감지 알림 로그     │  │
│  │   (시간대별 추이)       │  │   - 역주행 감지         │  │
│  │                         │  │   - 사고 감지           │  │
│  │                         │  │   - 정체 알림           │  │
│  └─────────────────────────┘  └─────────────────────────┘  │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  🔷 푸터                                                     │
└─────────────────────────────────────────────────────────────┘
```

### 주요 페이지

| 페이지            | 기능                                       |
| ----------------- | ------------------------------------------ |
| **대시보드**      | 전체 교통 현황 한눈에 보기, 주요 지표 카드 |
| **CCTV 모니터링** | 실시간 영상 + AI 분석 결과 오버레이        |
| **교통 현황**     | 지도 기반 정체/서행/원활 표시              |
| **이상 감지**     | 역주행, 갓길주차, 화재 등 이벤트 로그      |
| **교통량 예측**   | 시간대별 예측 그래프 + 혼잡 알림           |
| **설정**          | CCTV 등록, 알림 설정                       |

---

## 🤖 AI 감지 기능

### 미니 프로젝트에서 가져올 기능

- ✅ 역주행 감지 (`wrong_way.py`)
- ✅ 갓길 주차 감지 (`shoulder_parking.py`)
- ✅ 교통 콘 감지 (`traffic_cone.py`)
- ✅ 교통량 예측 (`TrafficPredictor`)

### 새로 추가할 기능

- 🆕 화재/연기 감지 (커스텀 YOLO 모델)
- 🆕 사고 감지 (차량 충돌 패턴)
- 🆕 보행자 위험 감지

### 모델 최적화

```
기존: YOLO (.pt) → PyTorch 추론
신규: YOLO (.pt) → OpenVINO (.xml/.bin) 또는 ONNX (.onnx) 변환
     → Intel GPU 가속 또는 CPU 최적화
```

---

## 📁 프로젝트 구조

```
final/
├── backend/
│   ├── app/
│   │   ├── main.py              # FastAPI 진입점
│   │   ├── config.py            # 환경설정
│   │   ├── routers/             # API 라우터
│   │   │   ├── cctv.py
│   │   │   ├── traffic.py
│   │   │   ├── detection.py
│   │   │   └── auth.py
│   │   ├── models/              # DB 모델
│   │   │   ├── user.py
│   │   │   ├── location.py
│   │   │   └── traffic.py
│   │   ├── services/            # 비즈니스 로직
│   │   │   ├── yolo_service.py
│   │   │   └── predict_service.py
│   │   └── ml/                  # AI 모델
│   │       ├── models/          # .onnx 또는 OpenVINO 모델
│   │       └── inference.py     # 추론 코드
│   ├── weights/                 # 모델 가중치
│   └── requirements.txt
│
├── frontend/
│   └── src/
│       ├── app/
│       │   ├── page.jsx         # 메인 대시보드
│       │   ├── cctv/
│       │   ├── traffic/
│       │   └── detection/
│       ├── components/
│       │   ├── Navbar.jsx
│       │   ├── CCTVPlayer.jsx
│       │   ├── TrafficMap.jsx
│       │   └── AlertLog.jsx
│       └── styles/
│
└── docker-compose.yml           # 배포용
```

---

## 📌 개발 우선순위

### Phase 1: 기본 구조

1. [ ] FastAPI 기본 구조 설정
2. [ ] Next.js 프로젝트 설정
3. [ ] DB 모델 설계 및 연결

### Phase 2: 핵심 기능

4. [ ] CCTV 스트리밍 (WebSocket)
5. [ ] YOLO → OpenVINO/ONNX 변환
6. [ ] 실시간 객체 탐지 연동

### Phase 3: UI 개발

7. [ ] 대시보드 UI
8. [ ] CCTV 모니터링 페이지
9. [ ] 지도 연동 (Kakao Map)

### Phase 4: 고급 기능

10. [ ] 교통량 예측 연동
11. [ ] 알림 시스템
12. [ ] 사용자 인증

---

## 🔗 참고 자료

- 미니 프로젝트: `A_TEST/` 폴더
- 기존 YOLO 모델: `A_TEST/yolo11n.pt`
- 기존 예측 모델: `A_TEST/mp/models.py` → `TrafficPredictor`

---

> 💡 **다음 단계**: UI 디자인 상세화 또는 백엔드 API 설계 진행
